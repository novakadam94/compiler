nodes: &NODES
- &A
    name: A
    roles:
    - X-role
- &B
    name: B
    roles:
    - Y-role
    - Z-role
    scaling:
        max: 5
- &C
    name: C
    roles:
    - Q-role
    scaling:
        min: 2
        max: 5
- &D
    name: D
    roles:
    - R-role
infrastructures:
-
    name: diamond
    expected_output:
    - !!set
      ? A
    - !!set
      ? C
      ? B
    - !!set
      ? D
    nodes: *NODES
    dependencies:
    - [ *D, *C ]
    - [ *D, *B ]
    - [ *B, *A ]
    - [ *C, *A ]
-
    name: linear
    expected_output:
    - !!set
      ? A
    - !!set
      ? B
    - !!set
      ? C
    - !!set
      ? D
    nodes: *NODES
    dependencies:
    - [ *D, *C ]
    - [ *B, *A ]
    - [ *C, *B ]
